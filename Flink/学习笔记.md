# 第一章 Flink 简介

## 1.1 初识Flink

​	Flink起源于Stratsphere项目，2014年12月，Flink成为Apache的顶级项目。

​	在德语中Flink一词代表快速和灵巧。

​	Flink的理念是**“Apache Flink是一个分布式、高性能、随时可用以及准确的流处理应用程序打造的开源流式处理框架”**。

​	Apache Flink 是一个框架和分布式计算引擎，用于对**有界和无界的数据进行有状态计算**。

​	Flink被设计在所有常见的集群中，以内存执行速度和任意规模来执行计算。

![Flink](/home/yangck/IdeaProjects/Bigdata/Flink/img/1-1初识flink.png)

​	如上图中，数据来源可以是事实事件如Clicks、Iot等Real-time Events，或者以Logs、Clicks为主的Database、FileSystem、KVStore。

​	通过Flink可以构建：

 - 构建Event-driven的实时应用。

 - Streaming Pipelines的数据管道。

 - Streaming & Batch的实时分析。

   Flink的资源管理可以通过K8s、Yarn、Mesos。Flink的状态存储可以放在HDFS、S3、NFS 上。

## 1.2 Flink的重要特点

### 1.2.1事件驱动型

​	事件驱动是一类**有状态**的应用，从**一个或者多个**数据来源提取数据。并根据到来的事件触发计算、状态更新或其他外部动作。比如以kafka为代表的消息队列都是事件驱动型应用。

​	与之不同的就是Spark Streaming的微批：

![](/home/yangck/IdeaProjects/Bigdata/Flink/img/1-2-1SparkStreaming.png)

​	batchs of input data。可以将数据从流转为批处理。

​	事件驱动型：

![](/home/yangck/IdeaProjects/Bigdata/Flink/img/1-2-1-Event-driving.png)

​	Event-driver中逐步ingest数据，然后**由于Flink是有状态的**，因此他的state是**周期性的、异步的带有检查点的写入到持久层中**，保证了有状态这一要求。同时如果有开窗等需求，会定期激活trigger方法，将数据进行计算。



### 1.2.2 流与批的世界观

​	批处理的特点是：**有界、大量、持久**的。非常适合需要访问全套记录才能完成工作，一般用于离线计算。

​	流处理的特点是：**无界、实时的**。无需对整个数据集进行计算，而是对通过系统的每个数据项进行操作，用于实时的统计。

​	对于Spark的世界观来说，一切都是由批次组成的，离线数据是一个大批次，实时数据是一个小批次。

​	对于Flink的世界观来说，一起都是由流组成的，离线数据是一个有界限的流，实时数据是一个无界限的流，也就是有界流与无界流。

​	**无界数据流**：无界数据流是一旦开始就没有结束的流，他们不会在生成时终止并提供数据，必须连续处理无界流，也就是在获取后**立即处理事件**。对于无界流无法等待数据全部到齐，因为数据是无界的，所以任何时间点都不会完成。

​	因此，处理无界数据流时候，对顺序（比如事件发生的时间）就特别重要，因为顺序意味着完整性。

​	**有界数据流**：有界数据流由于有明确的定义，可以在执行任何计算前通过获取所有的数据来处理有界流。这时候就可以做排序，因此有界流的处理也叫批处理。

### 1.2.3 分层api



![](/home/yangck/IdeaProjects/Bigdata/Flink/img/1-2-3.png)

- 最底层。提供了有状态流，通过过程函数（Process Function）被潜入到DataStream中。底层过程函数（Process Function）与DataStream API集成，使其可以对特定的某些操作进行底层的抽象。
- DataStram API，通过transformations、joins、aggregations、windows进行。
- Table API是以**表为中心的声明式编程**。TableAPi遵循关系性模型：表具有二维数据结构（schema）、同时Api提供可比较的操作，例如select、join、group by等语义，明确定义了什么逻辑应该执行，而不是说明如何执行。同时Table API支持UDF函数。我们可以在DataStream与TableAPi中来回切换。
- Flink最高级的抽象是SQL。这一层的语法与表达能力与Table API类似，但是可以通过SQL查询表达式的形式表现程序。SQL与TableAPi密切交互，SQL查询可以直接作用在Table API定义的表上。

其他的几个模块

- Flink CEP
- Flink Gelly
- Alink

# 第二章、快速上手

## 2.1、搭建maven工程

## 2.2、批处理的WordCount

## 2.3、流处理的WordCount













































